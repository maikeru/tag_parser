require 'rspec/core/rake_task'

RSpec::Core::RakeTask.new(:spec) do |t|
  t.rspec_opts = "--format Fuubar --color"
end

task :spec => [:ragel]

desc "Build the ragel state machine"
task :ragel => ["ragel/state_machine.rb"]

file "ragel/state_machine.rb" => ["ragel/state_machine.rl"] do |t|
  sh "ragel -R #{t.prerequisites.join(' ')}"
end

file "ragel/state_machine.rl"
